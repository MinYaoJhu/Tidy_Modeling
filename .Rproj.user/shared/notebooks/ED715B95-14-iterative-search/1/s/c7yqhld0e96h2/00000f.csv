"0","#| echo = FALSE, "
"0","#| dev = ""png"", "
"0","#| fig.height = 4.5,"
"0","#| out.width = ""80%"","
"0","#| fig.cap = ""Heatmap of the simulated annealing acceptance probabilities for different coefficient values"","
"0","#| fig.alt = ""A heatmap of the simulated annealing acceptance probabilities for different coefficient values. The probabilities are affected by the both the iteration number as well as how far off the the performance is from the current best."""
"0",""
"0","get_accept_probs <- function(coef, pct_diff) {"
"0","  # pct loss to abs value"
"0","  candidate <- .8 - (pct_diff  * .8 /100) "
"0","  "
"0","  x <- finetune:::acceptance_prob(0.8, candidate, 1:50, coef = coef, maximize = TRUE)"
"0","  tibble("
"0","    `Acceptance Probability` = x,"
"0","    iteration = 1:50,"
"0","    pct_diff = pct_diff, "
"0","    coefficient = coef"
"0","  )"
"0","}"
"0",""
"0","prob_settings <- crossing(pct_diff = 1:10, coefficient = c(10, 20, 30)/1000)"
"0","prob_res <- purrr::map2_dfr(prob_settings$coefficient, prob_settings$pct_diff, get_accept_probs)"
"0",""
"0","ggplot(prob_res, aes(x = iteration, y = pct_diff, fill = `Acceptance Probability`)) +"
"0","  geom_raster() +"
"0","  facet_wrap( ~ coefficient, labeller = label_both) +"
"0","  scale_fill_gradientn("
"0","    colours = scales::brewer_pal(palette = ""Greens"")(8),"
"0","    limits = 0:1"
"0","  ) +"
"0","  labs(y = ""Percent Loss"", x = ""Iteration"")"
